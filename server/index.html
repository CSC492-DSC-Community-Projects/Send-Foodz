<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Grocery Store Implementation</title>		
	</head>
	<body>
		<script src="GroceryStoreService.js" charset="utf-8"></script>
		<script src="Item.js" charset="utf-8"></script>
		<script src="Order.js" charset="utf-8"></script>
		<script type="text/javascript">

			//initally, doesn't have any inventory
			const gs = new GroceryStoreService({});

			const OntarioOrange = new Item({"inventoryItemId": "333",
											"name": "Ontario Orange",
											"quantity": 5,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "1"}
											);

			const GalaApple = new Item({"inventoryItemId": "678",
											"name": "Gala Apple",
											"quantity": 9,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "2"}
											);

			const FijiPear = new Item({"inventoryItemId": "976",
											"name": "Fiji Pear",
											"quantity": 6,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "1"}
											);

			const QuebecOrange = new Item({"inventoryItemId": "354",
											"name": "Quebec Orange",
											"quantity": 2,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "2"}
											);

			const PurpleCabbage = new Item({"inventoryItemId": "341",
											"name": "Purple Cabbage",
											"quantity": 5,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "1"}
											);

			const Cornflake = new Item({"inventoryItemId": "388",
											"name": "Cornflake",
											"quantity": 8,
											"expiryDate": "20 - 03 - 28",
											"groceryStoreId": "1"}
											);

			//create store inventory just a hashtable

			var gsinv = {};
			//other way don't work; keys must be strings
			gsinv["1"] =  { "333": OntarioOrange, "678": GalaApple, "976": FijiPear, "354": QuebecOrange , "341": PurpleCabbage, "388": Cornflake};
			gsinv["2"] = { "354": QuebecOrange , "341": PurpleCabbage, "388": Cornflake};
		

			//populate gs with an inventory
			gs.refreshInventory(gsinv);

			const ord1 = new Order({
							        "orderId": "11111",
							        "foodBankId": "3",
							        "groceryId": "1",
							        "status": '',
									"inventory": [
										{"inventoryItemId": "333",
										"name": "Ontario Orange",
										"quantity": 2,
										"expiryDate": "20 - 03 - 28",
										"groceryStoreId": "1"},
										{"inventoryItemId": "678",
										"name": "Gala Apple",
										"quantity": 5,
										"expiryDate": "20 - 03 - 28",
										"groceryStoreId": "1"}
										]
							        });

			gs.updateStatus(ord1);

			const ord2 = new Order({
						            "orderId": "22222",
						            "foodBankId": "4",
						            "groceryId": "1",
						            "status": '',
									"inventory": [
										{"inventoryItemId": "333",
										"name": "Ontario Orange",
										"quantity": 10,
										"expiryDate": "20 - 04 - 28",
										"groceryStoreId": "1"},
										{"inventoryItemId": "341",
										"name": "Purple Cabbage",
										"quantity": 1,
										"expiryDate": "20 - 03 - 28",
										"groceryStoreId": "1"}
									]
						        });

			gs.updateStatus(ord2);
		</script>

	</body>
</html>

