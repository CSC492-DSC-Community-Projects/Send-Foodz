<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Observer Pattern</title>
</head>

<body>
	<script src="GSInventory.js" charset="utf-8"></script>
	<script src="Order.js" charset="utf-8"></script>
	<script src="Item.js" charset="utf-8"></script>
	<script type="text/javascript">
		
		//create store inventory
		var gsinv = {};
		gsinv['apple'] = 10;
		gsinv['oranges'] = 8;
		gsinv['cookies'] = 9;
		gsinv['cabbage'] = 4;

		
		const driver1 = {
			driverId: 3,
			name: 'Dragonite',
			vehicle: 'Dodge caravan',
			messages: ''
		};

		const driver2 = {
			driverId: 4,
			name: 'Lugia',
			vehicle: 'Hovercar',
			messages: ''
		};

		const invalidDriver = {
			driverId: 100,
			name: 'Snorlax',
			vehicle: '',
			messages: ''
		};

		let Apple = new Item({
			inventoryItemId: 222,
			name: 'apple',
			quantity: 34,
			expiryDate: "2020-03-08",
			groceryStoreId: "333"
		});

		let Orange = new Item({
			inventoryItemId: 777,
			name: 'orange',
			quantity: 35,
			expiryDate: "2020-03-08",
			groceryStoreId: 333
		});

		let Cabbages = new Item({
			inventoryItemId: 123,
			name: 'cabbage',
			quantity: 2,
			expiryDate: "2020-03-08",
			groceryStoreId: 333
		});

		const order = {
			"orderId": 11111,
			"foodBankId": 3,
			"groceryId": 1,
			"inventoryItems": [
				Apple, Orange
			],
			"status": 'Available',
			"time": "2020-01-20"
		}

		const order2 = {
			"orderId": 333,
			"foodBankId": 3,
			"groceryId": 1,
			"inventoryItems": [
				Cabbages
			],
			"status": 'Available',
			"time": "2020-01-20"
		}

		let myOrder = new Order(order);
		let myOrder2 = new Order(order2);
		
		myOrder.addDriver(driver1);
		myOrder.addDriver(driver2);
		myOrder.addDriver(driver2);
		myOrder.addDriver(invalidDriver);

		//intialize store and orders		gs.addOrder(ord2);
		const gs = new GSInventory();

		//subscribe orders 
		gs.addOrder(myOrder);

		//update inventory
		gs.updateStatus(gsinv);

	</script>

</body>
</html>